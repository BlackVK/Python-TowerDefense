<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Tower Defense ‚Äî Python Control</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="styles.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/codemirror.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/theme/dracula.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/codemirror.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/mode/python/python.min.js"></script>
<script src="https://cdn.jsdelivr.net/pyodide/v0.23.4/full/pyodide.js"></script>
</head>
<body>
<div class="container">
  <div class="left card">
    <div class="panel-title">
      <h1>Tower Defense</h1>
      <div style="display:flex;gap:10px;align-items:center">
        <div class="chip" id="wave">–í–æ–ª–Ω–∞: 0</div>
        <div class="chip" id="money">–î–µ–Ω—å–≥–∏: 100</div>
        <div class="chip" id="lives">–ñ–∏–∑–Ω–∏: 10</div>
        <div class="chip" id="score">–°—á—ë—Ç: 0</div>
      </div>
    </div>
    <div id="gameWrap">
      <canvas id="gameCanvas"></canvas>
      <div id="ruler">
        <div>–®–∏—Ä–∏–Ω–∞: <span id="canvasWidth">0</span></div>
        <div>–í—ã—Å–æ—Ç–∞: <span id="canvasHeight">0</span></div>
        <div class="coordinates">–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã: (<span id="mouseX">0</span>, <span id="mouseY">0</span>)</div>
      </div>
      <button class="btn small ruler-toggle" id="toggleRulerBtn">üìè</button>
      <div id="gameOver">
        <div class="game-over-text">GAME OVER</div>
        <div class="game-over-subtext">–í–æ–ª–Ω–∞: <span id="finalWave">0</span> | –°—á—ë—Ç: <span id="finalScore">0</span></div>
        <div class="game-over-stats">
          <div>–£–±–∏—Ç–æ –≤—Ä–∞–≥–æ–≤: <span id="kills">0</span></div>
          <div>–ü–æ—Å—Ç—Ä–æ–µ–Ω–æ –±–∞—à–µ–Ω: <span id="towersBuilt">0</span></div>
          <div>–í—Å–µ–≥–æ —É–ª—É—á—à–µ–Ω–∏–π: <span id="upgradesDone">0</span></div>
        </div>
        <div class="game-over-subtext pulse">–ù–∞–∂–º–∏—Ç–µ –ª—é–±—É—é –∫–Ω–æ–ø–∫—É –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è</div>
      </div>
    </div>
    <div class="controls-row">
      <button class="btn small" id="togglePathBtn">Path: Wave</button>
      <div style="flex:1"></div>
      <button class="btn small danger" id="resetBtn">Reset</button>
    </div>
  </div>
  <div class="right">
    <div class="card editor-wrap">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <div class="tabs">
          <div class="tab active" data-tab="editor">Editor</div>
          <div class="tab" data-tab="guide">Guide</div>
        </div>
        <div style="display:flex;gap:8px">
          <button class="btn small" id="runBtn">Run (Ctrl+Enter)</button>
        </div>
      </div>
      <div id="editor"></div>
      <div id="guidePanel" class="guide-content"></div>
    </div>
    <div class="card">
      <div id="console" aria-live="polite"></div>
      <div class="footer-row">
        <div class="hint">–§—É–Ω–∫—Ü–∏–∏: <code>build_tower("–∏–º—è", x, y)</code>, <code>upgrade_tower("–∏–º—è")</code></div>
        <div style="display:flex;gap:8px">
          <button class="btn small" id="clearConsoleBtn">Clear</button>
        </div>
      </div>
    </div>
  </div>
</div>
<script src="game.js"></script>
<script src="editor.js"></script>
</body>
</html>