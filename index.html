<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Tower Defense ‚Äî Python Control</title>
    <link rel="icon" href="assets/icon.png" type="image/png">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/menu.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/codemirror.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/theme/dracula.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/mode/python/python.min.js"></script>
    <script src="https://cdn.jsdelivr.net/pyodide/v0.23.4/full/pyodide.js"></script>
</head>
<body>
    <div id="mainMenu"></div>

    <div class="container" style="display: none;">
        <div class="left card">
            <div class="panel-title">
                <h1 id="gameTitle">Tower Defense</h1>
                <div style="display:flex;gap:10px;align-items:center">
                    <div class="chip" id="wave">–í–æ–ª–Ω–∞: 0</div>
                    <div class="chip" id="money">–î–µ–Ω—å–≥–∏: 100</div>
                    <div class="chip" id="lives">–ñ–∏–∑–Ω–∏: 10</div>
                    <div class="chip" id="score">–°—á—ë—Ç: 0</div>
                </div>
            </div>
            <div id="gameWrap">
                <canvas id="gameCanvas"></canvas>
                
                <div id="levelDescription">
                    <div class="level-description-content">
                        <h2 id="levelDescriptionTitle">–£—Ä–æ–≤–µ–Ω—å 1: –û—Å–Ω–æ–≤—ã</h2>
                        <div class="level-objective">
                            <h3>üéØ –¶–µ–ª—å —É—Ä–æ–≤–Ω—è:</h3>
                            <p id="levelObjectiveText">–ü—Ä–æ–π–¥–∏—Ç–µ 5 –≤–æ–ª–Ω, –ø–æ—Å—Ç—Ä–æ–∏–≤ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—É—é –∑–∞—â–∏—Ç—É</p>
                        </div>
                        <div class="level-tips">
                            <h3>üí° –°–æ–≤–µ—Ç—ã:</h3>
                            <ul id="levelTipsList">
                                <li>–ù–∞—á–Ω–∏—Ç–µ —Å –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –±–∞—à–µ–Ω –Ω–∞ –∫–ª—é—á–µ–≤—ã—Ö —Ç–æ—á–∫–∞—Ö –ø—É—Ç–∏</li>
                                <li>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é build_tower("–∏–º—è", x, y)</li>
                                <li>–£–ª—É—á—à–∞–π—Ç–µ –±–∞—à–Ω–∏ –¥–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è —É—Ä–æ–Ω–∞</li>
                            </ul>
                        </div>
                        <div class="level-rewards">
                            <h3>üèÜ –ù–∞–≥—Ä–∞–¥–∞:</h3>
                            <p id="levelRewardText">–û—Ç–∫—Ä–æ–µ—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å –∫–∞–º–ø–∞–Ω–∏–∏</p>
                        </div>
                        <button class="btn-menu" onclick="hideLevelDescription()" style="margin-top: 20px;">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
                    </div>
                </div>
                
                <div id="ruler">
                    <div>–®–∏—Ä–∏–Ω–∞: <span id="canvasWidth">0</span></div>
                    <div>–í—ã—Å–æ—Ç–∞: <span id="canvasHeight">0</span></div>
                    <div class="coordinates">–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã: (<span id="mouseX">0</span>, <span id="mouseY">0</span>)</div>
                </div>
                <button class="btn small ruler-toggle" id="toggleRulerBtn">üìè</button>
                <div id="gameOver">
                    <div class="game-over-text">GAME OVER</div>
                    <div class="game-over-subtext">–í–æ–ª–Ω–∞: <span id="finalWave">0</span> | –°—á—ë—Ç: <span id="finalScore">0</span></div>
                    <div class="game-over-stats">
                        <div>–£–±–∏—Ç–æ –≤—Ä–∞–≥–æ–≤: <span id="kills">0</span></div>
                        <div>–ü–æ—Å—Ç—Ä–æ–µ–Ω–æ –±–∞—à–µ–Ω: <span id="towersBuilt">0</span></div>
                        <div>–í—Å–µ–≥–æ —É–ª—É—á—à–µ–Ω–∏–π: <span id="upgradesDone">0</span></div>
                    </div>
                    <div class="game-over-subtext pulse">–ù–∞–∂–º–∏—Ç–µ –ª—é–±—É—é –∫–Ω–æ–ø–∫—É –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è</div>
                </div>
            </div>
            <div class="controls-row">
                <div class="chip" id="mapInfo">–ö–∞—Ä—Ç–∞: –í–æ–ª–Ω–æ–≤–∞—è</div>
                <div style="flex:1"></div>
                <button class="btn small" id="menuBtn" onclick="returnToMenu()">üè† –ú–µ–Ω—é</button>
                <button class="btn small danger" id="resetBtn">Reset</button>
            </div>
        </div>
        <div class="right">
            <div class="card editor-wrap">
                <div style="display:flex;justify-content:space-between;align-items:center">
                    <div class="tabs">
                        <div class="tab active" data-tab="editor">Editor</div>
                        <div class="tab" data-tab="guide">Guide</div>
                    </div>
                    <div style="display:flex;gap:8px">
                        <button class="btn small" id="runBtn">Run (Ctrl+Enter)</button>
                    </div>
                </div>
                <div id="editor"></div>
                <div id="guidePanel" class="guide-content"></div>
            </div>
            <div class="card">
                <div id="console" aria-live="polite"></div>
                <div class="footer-row">
                    <div class="hint">–§—É–Ω–∫—Ü–∏–∏: <code>build_tower("–∏–º—è", x, y)</code>, <code>upgrade_tower("–∏–º—è")</code></div>
                    <div style="display:flex;gap:8px">
                        <button class="btn small" id="clearConsoleBtn">Clear</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="scripts/database.js"></script>
    <script src="scripts/menu.js"></script>
    <script src="scripts/game.js"></script>
    <script src="scripts/editor.js"></script>
    <script src="scripts/ui.js"></script>
    <script src="scripts/app.js"></script>
</body>
</html>